import { NextResponse } from 'next/server';\nimport { model } from '../../../lib/gemini';\n\nexport async function POST(req) {\n  try {\n    // Basic validation for API key presence\n    if (!process.env.GEMINI_API_KEY) {\n      console.error(\"GEMINI_API_KEY is not set in environment variables.\");\n      return NextResponse.json(\n        { error: 'Server configuration error: AI API key missing.' },\n        { status: 500 }\n      );\n    }\n\n    const { text, mood } = await req.json();\n\n    if (!text || text.trim() === '') {\n      return NextResponse.json(\n        { error: 'Text to rewrite cannot be empty.' },\n        { status: 400 }\n      );\n    }\n\n    if (!mood || mood.trim() === '') {\n      return NextResponse.json(\n        { error: 'Mood cannot be empty.' },\n        { status: 400 }\n      );\n    }\n\n    const prompt = `Rewrite the following text in a ${mood} tone:\n\n\"${text}\"\n\nRewritten text:`;\n\n    const result = await model.generateContent(prompt);\n    const response = await result.response;\n    const rewrittenText = response.text();\n\n    return NextResponse.json({ rewrittenText });\n\n  } catch (error) {\n    console.error('Error rewriting text with Gemini:', error);\n    // Google Generative AI errors can be complex, provide a generic message for MVP\n    return NextResponse.json(\n      { error: 'Failed to rewrite text. Please try again later.' },\n      { status: 500 }\n    );\n  }\n}